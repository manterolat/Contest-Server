(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{48:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Configuration")]),a("p",[t._v("This page describes how to configure:")]),a("ol",[a("li",[t._v("The Flask user/team registration webapp")]),a("li",[t._v("The Docker Compose project")])]),a("p",[t._v("These configurations are two seperate files, both of which need to be created in order for this suite to run properly. This page has sample/starter examples for both configurations, which you can copy into your files for development and/or deployment.")]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("IMPORTANT")]),a("p",[t._v("The "),a("code",[t._v(".env")]),t._v(" file does not interact with the Flask configurations and need to be configured separately.")])]),a("h2",{attrs:{id:"docker-compose-and-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-and-env","aria-hidden":"true"}},[t._v("#")]),t._v(" Docker Compose and "),a("code",[t._v(".env")])]),a("p",[t._v("The Compose config defines services for the project including:")]),a("ul",[a("li",[t._v("Databases")]),a("li",[t._v("Registration Webapp")]),a("li",[t._v("Domjudge Server")]),a("li",[t._v("Judgehosts")])]),a("p",[t._v("Services are configured with their own volumes, ports, dependencies, and environment variables. The project currently uses Compose file version 2, whose docs can be found "),a("a",{attrs:{href:"https://docs.docker.com/compose/compose-file/compose-file-v2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("here")]),t._v(".")]),a("p",[t._v("We use the "),a("code",[t._v(".env")]),t._v(" file to define several variables which control the Compose configuration. Environmental variables from the "),a("code",[t._v(".env")]),t._v(" file are interpolated into the \t"),a("code",[t._v("docker-compose.yml")]),t._v(" using "),a("code",[t._v("${VAR}")]),t._v(" syntax.")]),a("h4",{attrs:{id:"sample-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sample-env","aria-hidden":"true"}},[t._v("#")]),t._v(" Sample "),a("code",[t._v(".env")])]),a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("COMPOSE_PROJECT_NAME"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("contest\nDOM_PASS"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("abadpassword\n")])]),a("h4",{attrs:{id:"excerpt-from-docker-compose-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#excerpt-from-docker-compose-yml","aria-hidden":"true"}},[t._v("#")]),t._v(" Excerpt from "),a("code",[t._v("docker-compose.yml")])]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# Registration webapp service")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("domserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DOMJUDGE_DB_HOST=domdb\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DOMJUDGE_DB_PASSWORD=$"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DOM_PASS"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DOMJUDGE_DB_ROOT_PASSWORD=$"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DOM_PASS"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("h4",{attrs:{id:"output-of-docker-compose-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-of-docker-compose-config","aria-hidden":"true"}},[t._v("#")]),t._v(" Output of "),a("code",[t._v("docker-compose config")])]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("domserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("DOMJUDGE_DB_HOST")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" domdb\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("DOMJUDGE_DB_PASSWORD")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" abadpassword\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("DOMJUDGE_DB_ROOT_PASSWORD")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" abadpassword\n")])]),a("h2",{attrs:{id:"flask-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flask-configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Flask Configuration")]),a("p",[t._v("The webapp's config is handled via setting an environmental variable "),a("code",[t._v("FLASK_CONFIG")]),t._v(" to a file path relative to the webapp module's "),a("code",[t._v("__init__.py")]),t._v(". By default, these configs are to be stored in the repo's "),a("code",[t._v("/config")]),t._v(" folder. Below is a sample config, but you can find the recommened developer config stored in "),a("code",[t._v("/config")]),t._v(". For production config, please contact project maintainers.")]),a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# General dev config")]),t._v("\nDEBUG "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# MongoDB")]),t._v("\nMONGODB_SETTINGS "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'db'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'database'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v("# name of the database in MongoDB")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'host'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'localhost'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{attrs:{class:"token comment"}},[t._v("# hostname of server")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'port'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("27017")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'username'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'username'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{attrs:{class:"token comment"}},[t._v("# Database user")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'password'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'password'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{attrs:{class:"token comment"}},[t._v("# User's password")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# ReCaptcha")]),t._v("\nRECAPTCHA_ENABLED "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),t._v("\nRECAPTCHA_SITE_KEY "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'6LeyxBQUAAAAAHBpG2htNplW1qjcgODp47P6FHuE'")]),t._v("\nRECAPTCHA_SECRET_KEY "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("''")]),t._v("\n\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# Email Config")]),t._v("\nMAIL_SERVER "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'mail.cs.fsu.edu'")]),t._v("\nMAIL_PORT "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("587")]),t._v("\nMAIL_USE_TLS "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),t._v("\nMAIL_USE_SSL "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("False")]),t._v("\nMAIL_DEFAULT_SENDER "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'acm@cs.fsu.edu'")]),t._v("\nMAIL_USERNAME "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'<ACM USERNAME>'")]),t._v("\nMAIL_PASSWORD "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'<ACM PASSWORD>'")]),t._v("\n\n")])])])}],!1,null,null,null);s.default=e.exports}}]);